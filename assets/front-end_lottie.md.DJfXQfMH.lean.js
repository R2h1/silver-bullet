import{_ as i,c as a,o as n,P as l}from"./chunks/framework.DtSlGNS9.js";const p="/silver-bullet/assets/1.De8Ty6oG.png",h="/silver-bullet/assets/2.BI58gfNo.png",k="/silver-bullet/assets/3.DxOojGcj.png",t="/silver-bullet/assets/4.5lRUeIo8.png",F=JSON.parse('{"title":"lottie","description":"","frontmatter":{},"headers":[],"relativePath":"front-end/lottie.md","filePath":"front-end/lottie.md","lastUpdated":1757256095000}'),e={name:"front-end/lottie.md"};function r(D,s,d,g,y,C){return n(),a("div",null,[...s[0]||(s[0]=[l('<h1 id="lottie" tabindex="-1">lottie <a class="header-anchor" href="#lottie" aria-label="Permalink to &quot;lottie&quot;">​</a></h1><p>Lottie是一款由airbnb开源的跨平台动画渲染库，支持Android, iOS, Web, Windows平台。是专门用于解析从AE(Adobe After Effects)中通过 Bodymovin 插件导出的JSON文件，直接渲染动画。</p><h2 id="属性与方法" tabindex="-1">属性与方法 <a class="header-anchor" href="#属性与方法" aria-label="Permalink to &quot;属性与方法&quot;">​</a></h2><p><img src="'+p+'" alt=""></p><h2 id="优缺点" tabindex="-1">优缺点 <a class="header-anchor" href="#优缺点" aria-label="Permalink to &quot;优缺点&quot;">​</a></h2><p><strong>优点</strong>：</p><ol><li>UI 同学通过 AE 制作动画，前端可以直接还原和控制，降低动画工作量；</li><li>SVG 是可伸缩的，任何分辨率下都不会失真；</li><li>JSON 文件大小会比 GIF 以及 APNG 等文件小很多，性能也会更好。</li></ol><p><strong>缺点</strong>:</p><ol><li>lottie-web 文件本身比较大，大小为 513KB，轻量版压缩后也有 144KB，经过 GZIP 后，大小为39k；</li><li>使用的 json 文件是由 AE 导出的，如果 UI 在设计的时候创建了很多图层，可能会导致 json 文件较大；</li><li>有部分 AE 动画的效果还不支持，lottie 无法实现或存在性能问题。</li></ol><h2 id="动画数据对象-json-结构" tabindex="-1">动画数据对象（json）结构 <a class="header-anchor" href="#动画数据对象-json-结构" aria-label="Permalink to &quot;动画数据对象（json）结构&quot;">​</a></h2><p><img src="'+h+'" alt=""></p><h2 id="lottie-web-原理剖析" tabindex="-1">lottie-web 原理剖析 <a class="header-anchor" href="#lottie-web-原理剖析" aria-label="Permalink to &quot;lottie-web 原理剖析&quot;">​</a></h2><p><img src="'+k+'" alt=""></p><p><img src="'+t+`" alt=""></p><h2 id="封装可复用-lottie-函数组件-react" tabindex="-1">封装可复用 lottie 函数组件(React): <a class="header-anchor" href="#封装可复用-lottie-函数组件-react" aria-label="Permalink to &quot;封装可复用 lottie 函数组件(React):&quot;">​</a></h2><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> React</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> from</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;react&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> lottie</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,  { </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">type</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> AnimationItem</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> } </span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">from</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;lottie-web&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">type</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> RendererType</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;svg&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;canvas&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;html&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">interface</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;"> LottieProps</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 是否循环播放</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  loop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 渲染动画的类型</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  renderer</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">RendererType</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 是否自动播放</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  autoplay</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">boolean</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 动画渲染数据，与path互斥</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  animationData</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">any</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // JSON文件路径，与animationData互斥</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  path</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">string</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 动画名称</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  name</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?: </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">string</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"> * 封装 lottie 函数组件</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">const</span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;"> Lottie</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">forwardRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  {</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">    getInstance</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> AnimationItem</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">    play</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">    pause</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">    stop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">: () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> void</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  },</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  LottieProps</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;((</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">props</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">ref</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 设置props的默认值</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  const</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> { </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">loop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">renderer</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;svg&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">path</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">animationData</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">autoplay</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">true</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;">name</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;">&#39;anim&#39;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> } = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">props</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  const</span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;"> containerRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">useRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">HTMLDivElement</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  const</span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;"> animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">useRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&lt;</span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">AnimationItem</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> | </span><span style="--shiki-light:#267F99;--shiki-dark:#4EC9B0;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">&gt;(</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 暴露给从 props 传入的 ref 的方法</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">useImperativeHandle</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">ref</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ({</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 获取当前动画对象实例</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">    getInstance</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 播放，继续播放</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">    play</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">play</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    },</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 暂停动画</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">    pause</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">pause</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    },</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 停止动画，区别于暂停动画 pause()</span></span>
<span class="line"><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">    stop</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">stop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    },</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">  // 缓存 lottie 动画参数</span></span>
<span class="line"><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">  const</span><span style="--shiki-light:#0070C1;--shiki-dark:#4FC1FF;"> animationParams</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">useMemo</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationData</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> ? { </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">name</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">autoplay</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">loop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">renderer</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">animationData</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> } : { </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">name</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">autoplay</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">loop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">renderer</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">path</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> },</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    [</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">loop</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">renderer</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">autoplay</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">path</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">animationData</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">name</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">]</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  React</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">useEffect</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(() </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    if</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">containerRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">lottie</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">loadAnimation</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">({</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">        ...</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">animationParams</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        container:</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> containerRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">      });</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">    return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> () </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">=&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">      // 更新动画参数和卸载时，销毁动画对象，避免内存泄漏</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">?.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">destroy</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">      animationItemRef</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">current</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">null</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    };</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }, [</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">animationParams</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">]);</span></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">  return</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> (</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">    // 渲染容器</span></span>
<span class="line"><span style="--shiki-light:#800000;--shiki-dark:#808080;">    &lt;</span><span style="--shiki-light:#800000;--shiki-dark:#569CD6;">div</span><span style="--shiki-light:#E50000;--shiki-dark:#9CDCFE;"> ref</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">{</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">containerRef</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">}</span><span style="--shiki-light:#E50000;--shiki-dark:#9CDCFE;"> style</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">{</span><span style="--shiki-light:#000000FF;--shiki-dark:#D4D4D4;">{ </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">width:</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;100%&#39;</span><span style="--shiki-light:#000000FF;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">height:</span><span style="--shiki-light:#A31515;--shiki-dark:#CE9178;"> &#39;100%&#39;</span><span style="--shiki-light:#000000FF;--shiki-dark:#D4D4D4;"> }</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">}</span><span style="--shiki-light:#800000;--shiki-dark:#808080;">&gt;&lt;/</span><span style="--shiki-light:#800000;--shiki-dark:#569CD6;">div</span><span style="--shiki-light:#800000;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  );</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;">export</span><span style="--shiki-light:#AF00DB;--shiki-dark:#C586C0;"> default</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;"> Lottie</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div>`,16)])])}const b=i(e,[["render",r]]);export{F as __pageData,b as default};
