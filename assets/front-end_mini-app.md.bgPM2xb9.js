import{_ as s,o as i,c as n,k as p,t as e,R as a}from"./chunks/framework.h9arENNx.js";const g=JSON.parse('{"title":"微信小程序","description":"","frontmatter":{},"headers":[],"relativePath":"front-end/mini-app.md","filePath":"front-end/mini-app.md","lastUpdated":1712460773000}'),l={name:"front-end/mini-app.md"},t=a('<h1 id="微信小程序" tabindex="-1">微信小程序 <a class="header-anchor" href="#微信小程序" aria-label="Permalink to &quot;微信小程序&quot;">​</a></h1><h2 id="主要目录和文件的作用" tabindex="-1">主要目录和文件的作用 <a class="header-anchor" href="#主要目录和文件的作用" aria-label="Permalink to &quot;主要目录和文件的作用&quot;">​</a></h2><p>project.config.json 项目配置文件，用得最多的就是配置是否开启https校验；</p><p>App.js 设置一些全局的基础数据等；</p><p>App.json 底部tab, 标题栏和路由等设置；</p><p>App.wxss 公共样式，引入iconfont等；</p><p>pages 里面包含一个个具体的页面；</p><p>index.json (配置当前页面标题和引入组件等)；</p><p>index.wxml (页面结构)；</p><p>index.wxss (页面样式表)；</p><p>index.js (页面的逻辑，请求和数据处理等)；</p><h2 id="wxml与标准的html的异同" tabindex="-1">wxml与标准的html的异同 <a class="header-anchor" href="#wxml与标准的html的异同" aria-label="Permalink to &quot;wxml与标准的html的异同&quot;">​</a></h2><p>同：都是用来描述页面的结构；都由标签、属性等构成；</p>',13),h=a(`<h2 id="wxss和css的异同" tabindex="-1">WXSS和CSS的异同 <a class="header-anchor" href="#wxss和css的异同" aria-label="Permalink to &quot;WXSS和CSS的异同&quot;">​</a></h2><p>都是用来描述页面的样式；WXSS 具有 CSS 大部分的特性，也做了一些扩充和修改；WXSS新增了尺寸单位，WXSS 在底层支持新的尺寸单位 rpx（rpx:小程序的尺寸单位，规定屏幕为750rpx，可适配不同分辨率的屏幕）；WXSS 仅支持部分 CSS 选择器；WXSS 提供全局样式与局部样式</p><h2 id="封装微信小程序的数据请求" tabindex="-1">封装微信小程序的数据请求 <a class="header-anchor" href="#封装微信小程序的数据请求" aria-label="Permalink to &quot;封装微信小程序的数据请求&quot;">​</a></h2><p>在根目录下创建utils目录及api.js文件和apiConfig.js文件；</p><p>在apiConfig.js 封装基础的get, post 和 put， upload等请求方法，设置请求体，带上token和异常处理等；</p><p>在api中引入apiConfig.js封装好的请求方法，根据页面数据请求的urls, 设置对应的方法并导出；</p><p>在具体的页面中导入；</p><h2 id="页面间传递数据的方法" tabindex="-1">页面间传递数据的方法 <a class="header-anchor" href="#页面间传递数据的方法" aria-label="Permalink to &quot;页面间传递数据的方法&quot;">​</a></h2><p>给 html 元素添加 data-* 属性来传递值，然后通过 e.currentTarget.dataset 或 onload的param参数获取。注：data-名称不能有大写字母、不可以存放对象。</p><p>设置id的方法标识来传值，通过e.currentTarget.id获取设置的id的值，然后通过设置全局对象的方式来传递数值。</p><p>在navigator中添加参数数值。</p><p>使用全局变量实现数据传递。</p><p>页面跳转或重定向时，使用url带参数传递数据。</p><p>使用组件模板 template传递参数。</p><p>使用缓存传递参数。</p><p>使用数据库传递数据。</p><h2 id="小程序的双向绑定和vue的异同" tabindex="-1">小程序的双向绑定和vue的异同 <a class="header-anchor" href="#小程序的双向绑定和vue的异同" aria-label="Permalink to &quot;小程序的双向绑定和vue的异同&quot;">​</a></h2><p>大体相同，但小程序直接this.data的属性是不可以同步到视图的，必须调用this.setData()方法！</p><h2 id="小程序的生命周期函数" tabindex="-1">小程序的生命周期函数 <a class="header-anchor" href="#小程序的生命周期函数" aria-label="Permalink to &quot;小程序的生命周期函数&quot;">​</a></h2><p>onLoad() 页面加载时触发，只会调用一次，可获取当前页面路径中的参数。</p><p>onShow() 页面显示/切入前台时触发，一般用来发送数据请求；</p><p>onReady() 页面初次渲染完成时触发, 只会调用一次，代表页面已可和视图层进行交互。</p><p>onHide() 页面隐藏/切入后台时触发, 如底部 tab 切换到其他页面或小程序切入后台等。</p><p>onUnload() 页面卸载时触发，如redirectTo或navigateBack到其他页面时。</p><h2 id="微信小程序原理" tabindex="-1">微信小程序原理 <a class="header-anchor" href="#微信小程序原理" aria-label="Permalink to &quot;微信小程序原理&quot;">​</a></h2><p>小程序本质就是一个单页面应用，所有的页面渲染和事件处理，都在一个页面内进行，但又可以通过微信客户端调用原生的各种接口； 它的架构，是数据驱动的架构模式，它的UI和数据是分离的，所有的页面更新，都需要通过对数据的更改来实现；</p><p>它从技术讲和现有的前端开发差不多，采用JavaScript、WXML、WXSS三种技术进行开发；</p><p>功能可分为webview和appService两个部分；webview用来展现UI，appService有来处理业务逻辑、数据及接口调用；两个部分在两个进程中运行，通过系统层JSBridge实现通信，实现UI的渲染、事件的处理等。</p><h2 id="提高微信小程序的应用速度" tabindex="-1">提高微信小程序的应用速度 <a class="header-anchor" href="#提高微信小程序的应用速度" aria-label="Permalink to &quot;提高微信小程序的应用速度&quot;">​</a></h2><p>提高页面的加载速度</p><p>用户行为预测</p><p>减少默认data的大小</p><p>组件化方案</p><h2 id="分析微信小程序的优劣势" tabindex="-1">分析微信小程序的优劣势 <a class="header-anchor" href="#分析微信小程序的优劣势" aria-label="Permalink to &quot;分析微信小程序的优劣势&quot;">​</a></h2><p>优势：</p><ol><li>容易上手，基础组件库比较全，基本上不需要考虑兼容问题；</li><li>开发文档比较完善，开发社区比较活跃，支持插件式开发；</li><li>良好的用户体验：无需下载，通过搜索和扫一扫就可以打开，打开速度快，安卓上可以添加到桌面，与原生APP差不多；</li><li>开发成本比APP要低；</li><li>为用户提供良好的安全保障（小程序发布 严格的审查流程）</li></ol><p>劣势：</p><ol><li>限制较多，页面大小不能超过1M，不能打开超过5个层级的页面； 样式单一，部分组件已经是成型了的，样式不可修改，例如：幻灯片、导航</li><li>推广面窄，不能分享朋友圈，只能通过分享给朋友，附近小程序推广</li><li>依托于微信，无法开发后台管理功能</li><li>后台调试麻烦，因为api接口必须https请求且公网地址</li><li>真机测试，个别功能安卓和苹果表现迥异，例如安卓的定位功能加载很慢</li></ol><h2 id="解决微信小程序的异步请求问题" tabindex="-1">解决微信小程序的异步请求问题 <a class="header-anchor" href="#解决微信小程序的异步请求问题" aria-label="Permalink to &quot;解决微信小程序的异步请求问题&quot;">​</a></h2><p>在回调函数中调用下一个组件的函数：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// app.js</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">success</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">){</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    that</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">apirtnCallback</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">info</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// index.js</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#C8C8C8;">onLoad</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">:</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;">function</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(){</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    app</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">apirtnCallback</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;"> = </span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">res</span><span style="--shiki-light:#0000FF;--shiki-dark:#569CD6;"> =&gt;</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">        console</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">log</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">res</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="关联微信公众号如何确定用户的唯一性" tabindex="-1">关联微信公众号如何确定用户的唯一性 <a class="header-anchor" href="#关联微信公众号如何确定用户的唯一性" aria-label="Permalink to &quot;关联微信公众号如何确定用户的唯一性&quot;">​</a></h2><p>使用wx.getUserInfo方法 withCredentials为true时，可获取encryptedData，里面有union_id.后端需要进行对称解密。</p><h2 id="webview直接加载要注意哪些事项" tabindex="-1">webview直接加载要注意哪些事项？ <a class="header-anchor" href="#webview直接加载要注意哪些事项" aria-label="Permalink to &quot;webview直接加载要注意哪些事项？&quot;">​</a></h2><p>必须要在小程序后台使用管理员添加业务域名；</p><p>h5页面跳转至小程序的版本必须是1.3.1以上；</p><p>微信分享只可以是小程序的主名称，如要自定义分享内容，需小程序版本在1.7.1以上；</p><p>h5的支付不可以是微信公众号的appid，必须是小程序的appid，而且用户的openid也必须是用户和小程序的</p><h2 id="小程序调用后台接口遇到哪些问题" tabindex="-1">小程序调用后台接口遇到哪些问题 <a class="header-anchor" href="#小程序调用后台接口遇到哪些问题" aria-label="Permalink to &quot;小程序调用后台接口遇到哪些问题&quot;">​</a></h2><p>数据的大小限制，超过范围会直接导致整个小程序崩溃，除非重启小程序；</p><p>小程序不可以直接渲染文章内容这类型的html文本，显示需借助插件</p><p>注：插件渲染会导致页面加载变慢，建议在后台对文章内容的html进行过滤，后台直接处理批量替换p标签div标签为view标签。然后其他的标签让插件来做。</p><h2 id="微信小程序如何实现下拉刷新" tabindex="-1">微信小程序如何实现下拉刷新 <a class="header-anchor" href="#微信小程序如何实现下拉刷新" aria-label="Permalink to &quot;微信小程序如何实现下拉刷新&quot;">​</a></h2><p>用view代替scroll-view，设置onPullDownRefresh函数实现</p><h2 id="webview中的页面怎么跳转回小程序" tabindex="-1">webview中的页面怎么跳转回小程序？ <a class="header-anchor" href="#webview中的页面怎么跳转回小程序" aria-label="Permalink to &quot;webview中的页面怎么跳转回小程序？&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes light-plus dark-plus vp-code"><code><span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">wx</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">miniProgram</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">navigateTo</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">({</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">  url:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">’</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">pages</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">/</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">login</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">/</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">login</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">’+’</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">$params</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">’</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#008000;--shiki-dark:#6A9955;">// 跳转到小程序导航页面</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">wx</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">miniProgram</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">.</span><span style="--shiki-light:#795E26;--shiki-dark:#DCDCAA;">switchTab</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">(</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  {</span></span>
<span class="line"><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">    url:</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">’/</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">pages</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">/</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">index</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">/</span><span style="--shiki-light:#001080;--shiki-dark:#9CDCFE;">index</span><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">’</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">  }</span></span>
<span class="line"><span style="--shiki-light:#000000;--shiki-dark:#D4D4D4;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="bindtap-和-catchtap-的区别" tabindex="-1">bindtap 和 catchtap 的区别 <a class="header-anchor" href="#bindtap-和-catchtap-的区别" aria-label="Permalink to &quot;bindtap 和 catchtap 的区别&quot;">​</a></h2><p>bind事件绑定不会阻止冒泡事件向上冒泡</p><p>catch事件绑定可以阻止冒泡事件向上冒泡</p><h2 id="微信小程序与-h5-的区别" tabindex="-1">微信小程序与 H5 的区别 <a class="header-anchor" href="#微信小程序与-h5-的区别" aria-label="Permalink to &quot;微信小程序与 H5 的区别&quot;">​</a></h2><p>运行环境不同（小程序在微信运行，h5在浏览器运行）；</p><p>开发成本不同（h5需要兼容不同的浏览器）；</p><p>获取系统权限不同（系统级权限可以和小程序无缝衔接）；</p><p>应用在生产环境的运行流畅度（h5需不断对项目优化来提高用户体验）；</p><h2 id="小程序和vue写法的区别" tabindex="-1">小程序和Vue写法的区别 <a class="header-anchor" href="#小程序和vue写法的区别" aria-label="Permalink to &quot;小程序和Vue写法的区别&quot;">​</a></h2><p>遍历的时候：</p><p>小程序 wx:for = &quot;lists&quot;</p><p>Vue是 v-for = &quot;item in lists&quot;</p><p>调用data模型（赋值）的时候：</p><p>小程序：this.data.item //调用 this.setData({item:1}) // 赋值</p>`,70);function r(k,d,o,c,D,u){return i(),n("div",null,[t,p("p",null,"异：标签名字不一样，且小程序标签更少，单一标签更多；多了一些 wx:if 这样的属性以及 "+e()+" 这样的表达式，WXML仅能在微信小程序开发者工具中预览，而HTML可以在浏览器内预览；组件封装不同， WXML对组件进行了重新封装，小程序运行在JS Core内，没有DOM树和window对象，小程序中无法使用window对象和document对象。",1),h])}const m=s(l,[["render",r]]);export{g as __pageData,m as default};
